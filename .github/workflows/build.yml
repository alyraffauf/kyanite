---
name: Build Images
on:
    pull_request:
        branches:
            - main
    schedule:
        - cron: "05 10 * * *" # 10:05am UTC everyday
    push:
        branches:
            - main
        paths-ignore:
            - "**/README.md"
    workflow_dispatch:

jobs:
    build-kyanite:
        name: Build Kyanite
        uses: ./.github/workflows/reusable_build.yml
        permissions:
            contents: read
            packages: write
            id-token: write
        with:
            image_name: "kyanite"
            image_flavor: "main"
            image_desc: "Kyanite - A clean KDE Plasma bootc image"
            image_keywords: "bootc,ublue,universal-blue,kde"

    build-kyanite-gaming:
        name: Build Kyanite Gaming
        uses: ./.github/workflows/reusable_build.yml
        permissions:
            contents: read
            packages: write
            id-token: write
        with:
            image_name: "kyanite-gaming"
            image_flavor: "gaming"
            image_desc: "Kyanite Gaming - Gaming-focused variant with Steam"
            image_keywords: "bootc,ublue,universal-blue,kde,gaming,steam"
